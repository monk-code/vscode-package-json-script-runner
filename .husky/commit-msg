#!/usr/bin/env sh

echo "ğŸ” Validating commit message..."

# Run commitlint on the commit message
pnpm exec --no-install commitlint --edit "$1"

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit message validation failed!"
  echo ""
  echo "ğŸ“‹ Commit message format:"
  echo "  type(scope): description"
  echo ""
  echo "ğŸ“ Valid types:"
  echo "  â€¢ feat: A new feature"
  echo "  â€¢ fix: A bug fix"
  echo "  â€¢ docs: Documentation only changes"
  echo "  â€¢ style: Changes that don't affect code meaning"
  echo "  â€¢ refactor: Code change that neither fixes a bug nor adds a feature"
  echo "  â€¢ perf: Performance improvements"
  echo "  â€¢ test: Adding or updating tests"
  echo "  â€¢ build: Changes to build system or dependencies"
  echo "  â€¢ ci: Changes to CI configuration files and scripts"
  echo "  â€¢ chore: Other changes that don't modify src or test files"
  echo "  â€¢ revert: Reverts a previous commit"
  echo ""
  echo "âš ï¸  Remember: No AI attribution messages allowed!"
  echo ""
  echo "ğŸ’¡ Example: feat(script-runner): add support for yarn workspaces"
  echo ""
  exit 1
fi

echo "âœ… Commit message is valid!"